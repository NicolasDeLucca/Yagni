# ADR 009 - Uso de Axios en la API Gateway para llamar a los servicios de YAGNI y externos.

**Estado**: Aprobado

## Contexto:

En la arquitectura de microservicios de YAGNI, es esencial que las peticiones realizadas por los distintos usuarios (administradores, supervisores, dispositivos, clientes) sean redirigidas de manera eficiente a los servicios correspondientes. La API Gateway, como punto de entrada principal, debe gestionar y redirigir las solicitudes hacia los servicios de backend de acuerdo con las rutas y acciones solicitadas por los usuarios. Para lograr esta interacción, se ha decidido utilizar **Axios** como la biblioteca HTTP para realizar estas solicitudes entre la API Gateway y los servicios.

## Decisión:

Se utilizará **Axios** dentro de la API Gateway para dirigir las peticiones HTTP a los diferentes servicios de YAGNI. Axios permite hacer llamadas HTTP de manera eficiente y manejar respuestas asíncronas, lo cual es crucial para la arquitectura distribuida de servicios. La API Gateway actuará como un intermediario, haciendo uso de Axios para reenviar peticiones a los servicios relevantes según la lógica de negocio asociada a cada ruta, y a servicios externos como un proveedor de identidad para reforzar la confidencialidad y autenticación del sistema.

## Atributos de Calidad Satisfechos:

- **Disponibilidad**: El uso de Axios contribuye a la disponibilidad del sistema, ya que proporciona mecanismos como el manejo de errores en las solicitudes, ayudando a mitigar fallos temporales de red o de los servicios.
  
- **Escalabilidad**: Al desacoplar los servicios y permitir una fácil redirección de peticiones entre múltiples servicios, se garantiza que el sistema puede crecer y manejar más peticiones distribuidas.
  
- **Modificabilidad**: Axios es ampliamente utilizado y cuenta con una API intuitiva, lo que facilita su integración y mantenimiento en la API Gateway. Además, su compatibilidad con promesas permite un código más legible y manejable.

## Ventajas:

- **Simplicidad de uso**: Axios ofrece una sintaxis simple y clara para hacer peticiones HTTP, permitiendo manejar promesas y respuestas con facilidad, lo que simplifica la lógica de redirección en la API Gateway.
  
- **Compatibilidad**: Axios es compatible con Node.js y se adapta perfectamente a la arquitectura de servicios basada en JavaScript/TypeScript.
  
- **Manejo de Errores**: Axios permite una fácil configuración de interceptores de errores y reintentos, lo que mejora la robustez del sistema frente a fallos transitorios de los servicios.
  
- **Personalización de peticiones**: Es posible configurar de manera flexible encabezados, autenticaciones y opciones personalizadas de timeout para cada petición enviada desde la API Gateway.

## Desventajas:

- **Sobrecarga de dependencias**: Al depender de Axios, se introduce una dependencia adicional en el sistema, que podría necesitar actualizaciones o ajustes en caso de problemas de compatibilidad o vulnerabilidades en la librería.
  
- **Latencia adicional**: Aunque mínima, el uso de Axios para realizar peticiones HTTP entre la API Gateway y los servicios puede agregar una pequeña latencia adicional en el procesamiento de las solicitudes.
  
- **Manejo de fallos complejos**: En entornos de alta disponibilidad y con múltiples servicios, los mecanismos de reintento podrían necesitar una configuración más detallada para evitar sobrecargar servicios que ya estén experimentando fallos.

